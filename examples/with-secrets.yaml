# Context with secrets from multiple providers
# Demonstrates Bitwarden, Vault, and AWS Secrets Manager

name: app-production
description: "Application Production Environment"
environment: production

aws:
  profile: app-prod
  region: us-east-1
  sso_login: true

# Password manager for personal/team secrets
bitwarden:
  auto_login: true
  email: team@example.com

# Vault for infrastructure secrets
vault:
  address: https://vault.example.com
  auth_method: oidc
  auto_login: true

# Secrets to inject as environment variables
secrets:
  # Personal credentials from Bitwarden
  bitwarden:
    GPG_PASSPHRASE: "gpg-signing-key"

  # Infrastructure secrets from Vault
  vault:
    DB_PASSWORD: "databases/production#password"
    REDIS_URL: "cache/production#url"

  # Application secrets from AWS
  aws_secrets_manager:
    STRIPE_SECRET_KEY: "prod/stripe#secret_key"
    SENDGRID_API_KEY: "prod/sendgrid#api_key"

  aws_ssm:
    FEATURE_FLAGS: "/prod/app/feature_flags"

kubernetes:
  context: prod-cluster
  namespace: app

tunnels:
  - name: postgres
    local_port: 5432
    remote_host: db.internal
    remote_port: 5432
    auto_connect: true

browser:
  type: chrome
  profile: "Work"
